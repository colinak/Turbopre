<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <data>

    <!--view search of Quantity-->
    <record id="view_tr_stock_quant_search" model="ir.ui.view">
      <field name="name">tr.stock.quant.search</field>
      <field name="model">tr.stock.quant</field>
      <field name="type">search</field>
      <field name="arch" type="xml">
        <search string="Toolroom Quantity">
          <field name="product_id" />
          <field name="location_id" />
          <field name="lot_id" string="N째 de Serie" />
          <group expand='0' string='Filters'>
            <filter name='internal_loc' string="Ubicaciones Internas" domain="[('location_id.usage','=', 'internal')]"/>
            <filter name='external_loc' string="Ubicaciones Extrernas" domain="[('location_id.usage' ,'=', 'external')]"/>
            <filter name="on_hand" string="A mano" domain="[('on_hand', '=', True)]"/>
            <separator/>
            <filter name="negative" string="Stock Negativo" domain="[('quantity', '&lt;', 0)]"/>
            <filter name="positive" string="Stock Positivo" domain="[('quantity', '&gt;', 0)]"/>
            <!--<filter name="reserved" string="Reservado" domain="[('reserved_quantity', '&gt;', 0)]"/>-->
            <separator/>
            <filter name="filter_in_date" date="in_date"/>
          </group>
          <group expand='0' string='Group by...'>
            <filter string='Product' name="productgroup" context="{'group_by': 'product_id'}"/>
            <filter string='Location' name="locationgroup" domain="[]" context="{'group_by': 'location_id'}"/>
            <!--<filter string='Owner' name="owner" context="{'group_by': 'owner_id'}" groups="stock.group_tracking_owner"/>-->
            <filter string='Lot/Serial Number' name="Lot_Serial_number" context="{'group_by': 'lot_id'}" groups="stock.group_production_lot"/>
            <!--<filter string='Package' name="package" domain="[]" context="{'group_by': 'package_id'}" groups="stock.group_tracking_lot"/>-->
            <!--<filter string='Company' name="company" domain="[]" context="{'group_by': 'company_id'}" groups="base.group_multi_company"/>-->
          </group>
        </search>
      </field>
    </record>

    <!--view tree of Quantity-->
    <record id="view_tr_stock_quant_tree" model="ir.ui.view">
      <field name="name">tr.stock.quant.tree</field>
      <field name="model">tr.stock.quant</field>
      <field name="type">tree</field>
      <field name="arch" type="xml">
        <!--<tree string="Toolroom Quantity" editable="bottom" create="1" edit="1" import="0" js_class="singleton_list" sample="1">-->
        <!--<tree string="Toolroom Quantity" editable="bottom" create="1" edit="1" import="0" >-->
        <!--<tree string="Valoraci처n de inventario" js_class="inventory_report_list" create="0" delete="0" edit="0" >-->
        <tree string="Valoraci처n de inventario" create="0" delete="1" edit="0">
          <field name="name" string="Name" invisible="1"/>
          <field name="product_id" string="Herramienta/Equipo"/>
          <field name="product_tmpl_id" string="Herramienta/Equipo" invisible="1"/>
          <field name="location_id" />
          <field name="employee_id" />
          <field name="lot_id" />
          <field name="inventory_quantity" decoration-danger="inventory_quantity &lt; 0" readonly="0" />
          <field name="available_quantity" />
          <field name="product_uom_id" optional="hide"/>
          <!--<field name="lot_stock_id" string="Ubicaci처n de Stock" />-->
        </tree>
      </field>
    </record>


    <!--view action of Quantity-->
    <record id="action_tr_stock_quant" model="ir.actions.act_window">
      <field name="name">Informe de Inventario</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">tr.stock.quant</field>
      <field name="view_mode">tree</field>
      <field name="view_id" ref="view_tr_stock_quant_tree" />
      <field name="search_view_id" ref="view_tr_stock_quant_search"/>
      <field name="context">{'search_default_internal_loc': 1, 'search_default_productgroup':1, 'search_default_locationgroup':1}</field>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
          Crear Nuevo Informe
        </p>
      </field>
    </record>

    <!--<record model="ir.actions.act_window" id="tr_location_open_quants"> [> Used in location <]-->
        <!--<field name="context">{'search_default_productgroup': 1}</field>-->
        <!--<field name="domain">[('location_id', 'child_of', active_ids)]</field>-->
        <!--<field name="name">Stock Actual</field>-->
        <!--<field name="res_model">tr.stock.quant</field>-->
    <!--</record>-->
  
    <menuitem 
      id="menu_tr_stock_quant"
      name="Informe de inventario"
      parent="tbps_toolroom.menu_toolroom_informed"
      action="tbps_toolroom.action_tr_stock_quant"
      sequence="1"
      groups="base.group_system,group_tools_system,group_tools_manager,group_tools_user"
    />
  </data>
</odoo>
