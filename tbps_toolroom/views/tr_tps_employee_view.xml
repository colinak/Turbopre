<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <data>

    <record id="inherit_view_tps_employee_form" model="ir.ui.view">
      <field name="name">inherit.tps.employee.form</field>
      <field name="model">tps.employee</field>
      <field name="inherit_id" ref="tbps_quality_equipment.tps_employee_view_form" />
      <field name="arch" type="xml">
        <div name="button_box" position="inside">
          <button 
            name="%(tbps_toolroom.action_tr_stock_production_lot)d" 
            context="{'search_default_employee_id': id, 'default_employee_id': id}" 
            class="o_stat_button" 
            icon="fa-cubes" 
            type="action"
            groups="base.group_system,group_tools_system,group_tools_manager,group_tools_user"
          >
            <field name="tools_count" widget="statinfo"/>
          </button>
        </div>

        <page name="equipment" position="after">
          <page name="tools" string="Herramientas Prestadas" groups="tbps_toolroom.group_tools_user">
            <field name="loans" invisible="1" />
            <field name="tools_ids" options="{'no_create': True, 'no_create_edit': True}" readonly="1"
              widget="many2many">
              <!--domain="[(stage, '=', 'loan')]">-->
              <tree default_order="stage">
                <field name="product_id" string="Herramienta"/>
                <field name="name" />
                <field name="location_id" />
                <field name="stage" string="Operación" widget="badge" decoration-success="stage == 'assigned'" decoration-info="stage == 'loan'" decoration-warning="stage == 'in_custody'" />
              </tree>
            </field>
          </page>
          <!--<page name="tools" string="Herramientas Asignadas" groups="tbps_toolroom.group_tools_user">-->
            <!--<field name="tools_ids" options="{'no_create': True, 'no_create_edit': True}" readonly="1"-->
              <!--widget="many2many">-->
              <!--[>domain="[(stage, '=', 'assigned')]"><]-->
              <!--<tree default_order="stage">-->
                <!--<field name="product_id" string="Herramienta"/>-->
                <!--<field name="name" />-->
                <!--<field name="location_id" />-->
                <!--<field name="stage" string="Operación" widget="badge" decoration-success="stage == 'assigned'" decoration-info="stage == 'loan'" decoration-warning="stage == 'in_custody'" />-->
              <!--</tree>-->
            <!--</field>-->
          <!--</page>-->
        </page>

      </field>
    </record>


    <menuitem 
      id="menu_hr_employee"
      name="Informe de Empleados"
      parent="tbps_toolroom.menu_toolroom_informed"
      action="tbps_quality_equipment.tps_employee_action_view"
      sequence="1"
      groups="base.group_system,group_tools_system,group_tools_manager,group_tools_user"
    />

  </data>
</odoo>
